<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8' />
        <meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport">
    
        <style>
            @import url('https://fonts.googleapis.com/css2?family=Lobster&display=swap');

            html, body{
                padding: 0;
                margin: 0;
            }

            td{
                padding: .5em 1em;
                text-align: center;
                font-size: 16px
            }
            @media(max-width: 500px){
                td{
                    padding: .3em .7em;
                    font-size: 12px;
                }
            }

            #infosCalendar{
                display: flex;
                gap: 0 60px;
                text-align: center;
                align-items: center;
                justify-content: center;
                width: 100%;
            }

            .day{
                cursor: pointer;
                border-radius: 10px;
                border: solid 1px black;
                transition: .3s;
            }
            .day:hover{
                background-color: rgb(75, 130, 192);
                color: white;
            }

            .dayToday{
                position: relative;
                display: flex;
                justify-content: center;
                align-items: center;
            }

            .dayToday::before{
                content: '';
                position: absolute;
                border: 2px solid red;
                border-radius: 30px;
                height: 20px;
                width: 20px;
            }


            .container{
                display: flex;
                padding: 1em;
                flex-direction: column;
                align-items: center;
                justify-content: center;
            }

            .content-calendar{
                max-width: 360px;
                display: flex;
                flex-direction: column;
                align-items: center;
            }

            #month-Calendar{
                width: 100px;
            }

            #infosCalendar p{
                font-family: 'Lobster', cursive;
                font-size: 1.5rem;
            }

            #infosCalendar button{
                height: 30px;
                width: 30px;
                background-color:rgb(75, 130, 192);
                color: white;
                border: none;
                cursor: pointer;
                border-radius: 10px;
                font-weight: bold;
                transition: .5s;
            }

            #infosCalendar button:hover,
            #infosCalendar button::selection{
                background-color:rgb(0, 60, 129);
            }



            #button-new-event button{
                background-color: green;
                color: white;
                border: none;
                padding: .5em 1em;
                border-radius: 1em;
                cursor: pointer;
                margin-top: 2em;
            }


            #modal-new-event{
                top: 0;
                position: absolute;
                height: 100%;
                width: 100%;
                background-color: rgba(0, 0, 0, 0.671);
                overflow: hidden;

                display: flex;
                align-items: center;
                justify-content: center;
            }


            .container-modal{
                height: 300px;
                width: 500px;
                background-color: white;
                border-radius: .5em;
                padding: 1em 5em;
            }

            .body-modal form .content-input{
                display: grid;
                grid-template-columns: 1fr 1fr;
                margin-top: 1em;
            }
            .body-modal form .content-input:first-child{
                margin-top: 0;
            }
            .body-modal form div button{
                background-color: green;
                color: white;
                border: none;
                padding: 1em .5em;
                border-radius: 10px;
                font-weight: bold;
                cursor: pointer;
            }
            .heading-modal{
                display: flex;
                justify-content: end;
                height: 80px;
            }
            .heading-modal button{
                color: white;
                background-color: red;
                border: none;
                border-radius: 2px;
                height: 20px;
                cursor: pointer;
            }
            .colorEvent{
                background-color: red;
                height: 10px;
                width: 10px;
                margin-top: 0;
            }

            
        </style>
    </head>
    <body>


        <div class="container">

            <div class="content-calendar">
                <div id="infosCalendar">
                    <button onclick="later();"><</button>
                    <p id="month-Calendar"></p>
                    <button onclick="next();">></button>
                </div>

                <table id="calendar">
                    <thead>
                        <tr>
                            <th>dom</th>
                            <th>seg</th>
                            <th>ter</th>
                            <th>qua</th>
                            <th>qui</th>
                            <th>sex</th>
                            <th>sab</th>
                        </tr>
                    </thead>

                    <tbody>

                    </tbody>
                </table>
                
                <div style="width: 100%;" id="myEvents">

                </div>

                <div id="button-new-event">
                    <button id="btnNewEvent">Cadastrar novo evento</button>
                </div>
            </div>
        </div>


        <div id="modal-new-event">
            <div class="container-modal">
                <div class="heading-modal">
                    <button id="closed-modal">X</button>
                </div>
                <div class="body-modal">
                    <form>
                        <div class="content-input">
                            <label>Nome do Evento</label>
                            <input id="nameEvent" name="nameEvent" type="text" /> 
                        </div>

                        <div class="content-input">
                            <label>Descrição do Evento</label>
                            <input id="descriptionEvent" name="descriptionEvent" type="text" />
                        </div>

                        <div class="content-input">
                            <label>Cor</label>
                            <span>
                                <input type="radio" id="colorEvent" name="colorEvent"></input>
                                <div class="colorEvent"></div>
                            </span>
                        </div>

                        <div class="content-input">
                            <label>Data do Evento</label>
                            <input id="dateEvent" name="dateEvent" type="date" />
                        </div>

                        <div >
                            <button id="submit">Cadastrar Evento</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <script>

            const eventos = [
                {
                    nome: "O mundo",
                    dia: 17,
                    mes: 3,
                    ano: 2022,
                    color: 'red',
                },
                {
                    nome: "Show de Bola",
                    dia: 14,
                    mes: 3,
                    ano: 2022,
                    color: 'blue',
                },
                {
                    nome: 'teste',
                    dia: 5,
                    mes: 4,
                    ano: 2022,
                    color: 'pink',
                },
                {
                    nome: "O mundo",
                    dia: 30,
                    mes: 4,
                    ano: 2022,
                    color: 'red',
                },
            ]



            const loadingDate = (year, month, day, limitDay, today) =>{
                let date2 = new Date(year, month, 1);

                let dados=``;
                let sub = 0;
                let aux = 0;
                for(let i = 1; i <= 6; i++){
                    dados+=`<tr>`;
                    for(let j = 1; j <= 7; j++){

                        if(i===1){
                            if(j-1 >= date2.getDay()){
                                dados+=`<td id='${j+aux-sub}-${month+1}-${year}' class='day'>${(j+aux-sub < 10)?'0':''}${j+aux-sub}</td>`             
                            }else{
                                dados+=`<td></td>`;
                                sub++;
                            }
                        }else{
                            if(j+aux-sub <= limitDay){ 
                                dados+=`<td id='${j+aux-sub}-${month+1}-${year}' class='day' >${(j+aux-sub < 10)?'0':''}${j+aux-sub}</td>`;  
                            }else{
                                dados+=`<td></td>`;
                            }
                        }
                    }
                    dados+=`</tr>`
                    aux+=7;
                }


                const TableCalendar = document.querySelector('#calendar tbody');
                TableCalendar.innerHTML = dados;

                let dayToday = document.getElementById(today);
                if(dayToday != null){
                    dayToday.classList.add('dayToday');
                } 
            }

            const limitMonth = (year, month) =>{
                if(month == 0 || month == 2 || month == 4 || month == 6 || month == 7 || month == 9 || month == 11){
                    return(31);
                }else if (month == 3 || month == 5 || month == 8 || month == 10){
                    return(30);
                }else{
                    if(year % 4 === 0){
                        return(29);
                    }else{
                        return(28);
                    }
                }
            }

            const nameMonth = (month) =>{
                if(month === 0){
                    return('Janeiro');
                }else if(month === 1){
                    return('Fevereiro');
                }else if(month === 2){
                    return('Março');
                }else if(month === 3){
                    return('Abril');
                }else if(month === 4){
                    return('Maio');
                }else if(month === 5){
                    return('Junho');
                }else if(month === 6){
                    return('Julho');
                }else if(month === 7){
                    return('Agosto');
                }else if(month === 8){
                    return('Setembro');
                }else if(month === 9){
                    return('Outubro');
                }else if(month === 10){
                    return('Novembro');
                }else if(month === 11){
                    return('Dezembro');
                }else{
                    return('Mês não encontrado');
                }
            }

            const makerEvent = (eventos, month) =>{
                let containerEvent = ``;
                
                for(i=0; i<eventos.length; i++){
                    let id = `${eventos[i].dia}-${eventos[i].mes}-${eventos[i].ano}`;

                    let idSelect = document.getElementById(id);
                    if (idSelect != undefined){  
                        idSelect.style.backgroundColor = eventos[i].color;

                        containerEvent += `
                            <div style="width: 100%; height: 30px; display: grid; grid-template-columns: 1fr 3fr; margin-top: .5em;">
                                <div style="background-color: ${eventos[i].color}; display: flex; align-items: center; justify-content: center; color: white;">${eventos[i].dia}</div>
                                <div style="text-align: center;">${eventos[i].nome}</div>
                            </div>
                        `
                    }
                }
                document.querySelector('#myEvents').innerHTML = containerEvent;
            }

            let date = new Date();
            let day = date.getDate();
            let year = date.getFullYear();
            let month = date.getMonth();

            const today = `${day}-${month+1}-${year}`;

            loadingDate(year, month, day, limitMonth(year, month), today);

            const NameMonth = document.querySelector('#month-Calendar');
            NameMonth.innerHTML = nameMonth(month);

            makerEvent(eventos, month);


            //Evento de Clique >

            

            const next = () =>{
                month++;
                if(month > 11){
                    month = 0;
                }
                loadingDate(year, month, day, limitMonth(year, month), today);
                NameMonth.innerHTML = nameMonth(month);
                makerEvent(eventos, month);


            }

            const later = () =>{
                month--;
                if(month < 0){
                    month = 11;
                }
                loadingDate(year, month, day, limitMonth(year, month), today);
                NameMonth.innerHTML = nameMonth(month);
                makerEvent(eventos, month);


            }




            const btn = document.querySelector("#submit");
            document.getElementById('modal-new-event').style.display = 'none';
            btn.addEventListener("click", function(e) {
                
                e.preventDefault();

                
            });

            const btnNewEvent = document.querySelector("#btnNewEvent");
            btnNewEvent.addEventListener("click", ()=>{
                document.getElementById('modal-new-event').style.display = 'flex';
            })

            const btnClosedModal = document.querySelector("#closed-modal");
            btnClosedModal.addEventListener("click", ()=>{
                document.getElementById('modal-new-event').style.display = 'none';
            })

            

            //let date = new Date (year, month);

            //console.log(date.getMonth()+1);
        </script>
    </body>
</html>
